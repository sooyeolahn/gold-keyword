name: Gold Keyword Collector

on:
  schedule:
    # 30분마다 실행 (매 시 0분, 30분)
    - cron: '0,30 * * * *'
  workflow_dispatch: # 수동 실행 버튼 활성화

jobs:
  collect-data:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt

    - name: Run collector script
      run: python run_batch_github.py
      # 환경변수가 필요한 경우 여기에 추가 (현재는 코드에 하드코딩 되어 있어서 생략 가능하지만, 보안상 권장)
      # env:
      #   SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
      #   SUPABASE_KEY: ${{ secrets.SUPABASE_KEY }}
